# Git Workflow: Dev –∏ Main –≤–µ—Ç–∫–∏

## üåø –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ç–æ–∫

- **`dev`** - –≤–µ—Ç–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (development)
- **`main`** - –≤–µ—Ç–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (production)

## üìã –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ –≤–µ—Ç–∫–µ dev

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ dev –≤–µ—Ç–∫—É
git checkout dev

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
git checkout -b feature/–Ω–∞–∑–≤–∞–Ω–∏–µ-—Ñ–∏—á–∏

# –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ GitHub
git push origin dev
# –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
npm run deploy:dev
```

### 2. –î–µ–ø–ª–æ–π dev –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ `git push origin dev`:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è GitHub Actions
- ‚úÖ –î–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ (preview/preview URL)
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º

### 3. –°–ª–∏—è–Ω–∏–µ –≤ main (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)

–ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
npm run deploy:main

# –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é
git checkout main
git merge dev
git push origin main
git checkout dev
```

### 4. –î–µ–ø–ª–æ–π –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–ü–æ—Å–ª–µ `git push origin main`:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è GitHub Actions
- ‚úÖ –î–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ production –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: Pull Request

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pull Request –¥–ª—è —Å–ª–∏—è–Ω–∏—è dev ‚Üí main:

1. –°–æ–∑–¥–∞–π—Ç–µ PR –Ω–∞ GitHub:
   ```
   https://github.com/overlynxxx/ticket_story/compare/main...dev
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –ù–∞–∂–º–∏—Ç–µ "Merge pull request"
4. GitHub –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –Ω–∞ production

## üì¶ –°–∫—Ä–∏–ø—Ç—ã npm

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ dev –≤–µ—Ç–∫–µ
npm run deploy:dev      # –ö–æ–º–º–∏—Ç –∏ –ø—É—à –≤ dev

# –°–ª–∏—è–Ω–∏–µ dev ‚Üí main
npm run deploy:main    # –ú–µ—Ä–¥–∂ –∏ –ø—É—à –≤ main

# –û–±—ã—á–Ω—ã–π –¥–µ–ø–ª–æ–π (–≤ —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É)
npm run deploy         # –ö–æ–º–º–∏—Ç –∏ –ø—É—à –≤ —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –î–µ–ª–∞–π—Ç–µ:
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–Ω–∞—á–∞–ª–∞ –≤ `dev`
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pull Request –¥–ª—è code review
- –ü–∏—à–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–æ–≤

### ‚ùå –ù–µ –¥–µ–ª–∞–π—Ç–µ:
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –Ω–∞–ø—Ä—è–º—É—é –≤ `main` (–∫—Ä–æ–º–µ hotfix)
- –ù–µ –º–µ—Ä–¥–∂–∏—Ç–µ `main` –≤ `dev` –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ù–µ –ø—É—à–∏—Ç–µ –Ω–µ—Ä–∞–±–æ—á–∏–π –∫–æ–¥

## üö® Hotfix (—Å—Ä–æ—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å—Ä–æ—á–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:

```bash
# –°–æ–∑–¥–∞—Ç—å hotfix –≤–µ—Ç–∫—É –æ—Ç main
git checkout main
git checkout -b hotfix/–æ–ø–∏—Å–∞–Ω–∏–µ-–±–∞–≥–∞

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥, –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å
git add .
git commit -m "Hotfix: –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
git push origin hotfix/–æ–ø–∏—Å–∞–Ω–∏–µ-–±–∞–≥–∞

# –°–æ–∑–¥–∞—Ç—å PR hotfix ‚Üí main
# –ü–æ—Å–ª–µ –º–µ—Ä–¥–∂–∞ –≤ main, —Ç–∞–∫–∂–µ —Å–º–µ—Ä–¥–∂–∏—Ç—å –≤ dev:
git checkout dev
git merge main
git push origin dev
```

## üìä –°—Ö–µ–º–∞ workflow

```
dev (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
  ‚Üì
  [—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏]
  ‚Üì
  [Pull Request]
  ‚Üì
main (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
  ‚Üì
  [–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π]
  ‚Üì
  [–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ]
```

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/overlynxxx/ticket_story)
- [Actions (dev)](https://github.com/overlynxxx/ticket_story/actions?query=branch%3Adev)
- [Actions (main)](https://github.com/overlynxxx/ticket_story/actions?query=branch%3Amain)
